{"ast":null,"code":"import \"core-js/modules/es.regexp.flags.js\";\nimport axios from 'axios';\nexport default {\n  name: 'AdminDashboard',\n  data() {\n    return {\n      activeUsers: 0,\n      activeCampaigns: 0,\n      adRequests: 0,\n      pendingSponsors: [],\n      flags: [],\n      showFlagModal: false,\n      flagReason: '',\n      flagUserId: null\n    };\n  },\n  mounted() {\n    this.fetchStats();\n    this.fetchPendingSponsors();\n    this.fetchFlags();\n  },\n  methods: {\n    async fetchStats() {\n      try {\n        const token = localStorage.getItem('access_token');\n        const response = await axios.get('http://127.0.0.1:5000/admin/dashboard', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.activeUsers = response.data.users_count;\n        this.activeCampaigns = response.data.campaigns_count;\n        this.adRequests = response.data.ad_requests_count;\n      } catch (error) {\n        console.error('Error fetching statistics', error);\n      }\n    },\n    async fetchPendingSponsors() {\n      try {\n        const token = localStorage.getItem('access_token');\n        const response = await axios.get('http://127.0.0.1:5000/admin/pending_sponsors', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.pendingSponsors = response.data;\n      } catch (error) {\n        console.error('Error fetching pending sponsors', error);\n      }\n    },\n    async approveSponsor(userId) {\n      try {\n        const token = localStorage.getItem('access_token');\n        await axios.post('http://127.0.0.1:5000/admin/approve_sponsor', {\n          user_id: userId\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.fetchPendingSponsors();\n      } catch (error) {\n        console.error('Error approving sponsor', error);\n      }\n    },\n    async fetchFlags() {\n      try {\n        const token = localStorage.getItem('access_token');\n        const response = await axios.get('http://127.0.0.1:5000/admin/flags', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.flags = response.data;\n      } catch (error) {\n        console.error('Error fetching flags', error);\n      }\n    },\n    showFlagUserModal(userId) {\n      this.showFlagModal = true;\n      this.flagUserId = userId;\n    },\n    closeFlagModal() {\n      this.showFlagModal = false;\n      this.flagReason = '';\n    },\n    async flagUser() {\n      try {\n        const token = localStorage.getItem('access_token');\n        await axios.post('http://127.0.0.1:5000/admin/flag_user', {\n          user_id: this.flagUserId,\n          reason: this.flagReason\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.closeFlagModal();\n        this.fetchFlags();\n      } catch (error) {\n        console.error('Error flagging user', error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","activeUsers","activeCampaigns","adRequests","pendingSponsors","flags","showFlagModal","flagReason","flagUserId","mounted","fetchStats","fetchPendingSponsors","fetchFlags","methods","token","localStorage","getItem","response","get","headers","Authorization","users_count","campaigns_count","ad_requests_count","error","console","approveSponsor","userId","post","user_id","showFlagUserModal","closeFlagModal","flagUser","reason"],"sources":["C:\\Users\\deepa\\deepanshu\\IIT Madras\\appdev2\\influencer\\frontend\\src\\views\\AdminDashboard.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <header class=\"dashboard-header\">\r\n      <h2>Admin Dashboard</h2>\r\n    </header>\r\n    <section class=\"dashboard-content\">\r\n      <!-- Platform Statistics Card -->\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <h5 class=\"card-title\">Platform Statistics</h5>\r\n          <p class=\"card-text\">Overview of platform activity.</p>\r\n          <p><strong>Active Users:</strong> {{ activeUsers }}</p>\r\n          <p><strong>Active Campaigns:</strong> {{ activeCampaigns }}</p>\r\n          <p><strong>Ad Requests:</strong> {{ adRequests }}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Pending Sponsors Card -->\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <h5 class=\"card-title\">Pending Sponsors</h5>\r\n          <ul v-if=\"pendingSponsors.length > 0\" class=\"pending-sponsors-list\">\r\n            <li v-for=\"sponsor in pendingSponsors\" :key=\"sponsor.id\" class=\"pending-sponsor-item\">\r\n              <p><strong>Email:</strong> {{ sponsor.email }}</p>\r\n              <button @click=\"approveSponsor(sponsor.id)\" class=\"approve-button\">Approve</button>\r\n              <button @click=\"showFlagUserModal(sponsor.id)\" class=\"flag-button\">Flag</button>\r\n            </li>\r\n          </ul>\r\n          <p v-else class=\"no-pending-sponsors\">No pending sponsors.</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Flag User Modal -->\r\n      <div v-if=\"showFlagModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n          <span class=\"close\" @click=\"closeFlagModal\">&times;</span>\r\n          <h2>Flag User</h2>\r\n          <label for=\"flagReason\">Reason:</label>\r\n          <textarea id=\"flagReason\" v-model=\"flagReason\"></textarea>\r\n          <button @click=\"flagUser\">Submit</button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Display Flags -->\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <h5 class=\"card-title\">Flagged Items</h5>\r\n          <ul v-if=\"flags.length > 0\" class=\"flags-list\">\r\n            <li v-for=\"flag in flags\" :key=\"flag.id\" class=\"flag-item\">\r\n              <p><strong>Type:</strong> {{ flag.flagged_type }}</p>\r\n              <p><strong>ID:</strong> {{ flag.flagged_id }}</p>\r\n              <p><strong>Reason:</strong> {{ flag.reason }}</p>\r\n              <p><strong>Timestamp:</strong> {{ flag.timestamp }}</p>\r\n            </li>\r\n          </ul>\r\n          <p v-else>No flagged items.</p>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'AdminDashboard',\r\n  data() {\r\n    return {\r\n      activeUsers: 0,\r\n      activeCampaigns: 0,\r\n      adRequests: 0,\r\n      pendingSponsors: [],\r\n      flags: [],\r\n      showFlagModal: false,\r\n      flagReason: '',\r\n      flagUserId: null,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchStats();\r\n    this.fetchPendingSponsors();\r\n    this.fetchFlags();\r\n  },\r\n  methods: {\r\n    async fetchStats() {\r\n      try {\r\n        const token = localStorage.getItem('access_token');\r\n        const response = await axios.get('http://127.0.0.1:5000/admin/dashboard', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        });\r\n        this.activeUsers = response.data.users_count;\r\n        this.activeCampaigns = response.data.campaigns_count;\r\n        this.adRequests = response.data.ad_requests_count;\r\n      } catch (error) {\r\n        console.error('Error fetching statistics', error);\r\n      }\r\n    },\r\n    async fetchPendingSponsors() {\r\n      try {\r\n        const token = localStorage.getItem('access_token');\r\n        const response = await axios.get('http://127.0.0.1:5000/admin/pending_sponsors', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        });\r\n        this.pendingSponsors = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching pending sponsors', error);\r\n      }\r\n    },\r\n    async approveSponsor(userId) {\r\n      try {\r\n        const token = localStorage.getItem('access_token');\r\n        await axios.post('http://127.0.0.1:5000/admin/approve_sponsor', { user_id: userId }, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        });\r\n        this.fetchPendingSponsors();\r\n      } catch (error) {\r\n        console.error('Error approving sponsor', error);\r\n      }\r\n    },\r\n    async fetchFlags() {\r\n      try {\r\n        const token = localStorage.getItem('access_token');\r\n        const response = await axios.get('http://127.0.0.1:5000/admin/flags', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        });\r\n        this.flags = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching flags', error);\r\n      }\r\n    },\r\n    showFlagUserModal(userId) {\r\n      this.showFlagModal = true;\r\n      this.flagUserId = userId;\r\n    },\r\n    closeFlagModal() {\r\n      this.showFlagModal = false;\r\n      this.flagReason = '';\r\n    },\r\n    async flagUser() {\r\n      try {\r\n        const token = localStorage.getItem('access_token');\r\n        await axios.post('http://127.0.0.1:5000/admin/flag_user', {\r\n          user_id: this.flagUserId,\r\n          reason: this.flagReason\r\n        }, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        });\r\n        this.closeFlagModal();\r\n        this.fetchFlags();\r\n      } catch (error) {\r\n        console.error('Error flagging user', error);\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.dashboard {\r\n  font-family: Arial, sans-serif;\r\n  padding: 20px;\r\n}\r\n\r\n.dashboard-header {\r\n  background: linear-gradient(to right, #e07a7a, #d9534f);\r\n  color: #fff;\r\n  text-align: center;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.dashboard-header h2 {\r\n  font-size: 2.5rem;\r\n  margin: 0;\r\n  font-weight: bold;\r\n}\r\n\r\n.dashboard-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.card {\r\n  background: #fff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n  padding: 20px;\r\n  flex: 1;\r\n  min-width: 250px;\r\n}\r\n\r\n.card-body {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.card-title {\r\n  font-size: 1.8rem;\r\n  color: #d9534f;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.pending-sponsors-list {\r\n  list-style-type: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.pending-sponsor-item {\r\n  background: #f9f9f9;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  padding: 15px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.no-pending-sponsors {\r\n  color: #999;\r\n  font-style: italic;\r\n}\r\n\r\n.approve-button {\r\n  background: #5cb85c;\r\n  color: #fff;\r\n  border: none;\r\n  padding: 8px 12px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n}\r\n\r\n.approve-button:hover {\r\n  background: #4cae4c;\r\n}\r\n\r\n.modal {\r\n  display: flex;\r\n  position: fixed;\r\n  z-index: 1;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: auto;\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.modal-content {\r\n  background-color: #fefefe;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  width: 500px;\r\n  max-width: 90%;\r\n}\r\n\r\n.close {\r\n  color: #aaa;\r\n  float: right;\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n}\r\n\r\n.close:hover,\r\n.close:focus {\r\n  color: black;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.flag-button {\r\n  background-color: #d9534f;\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 12px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  margin-left: 10px;\r\n}\r\n\r\n.flag-button:hover {\r\n  background-color: #c9302c;\r\n}\r\n</style>\r\n"],"mappings":";AAgEA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,CAAC;MACdC,eAAe,EAAE,CAAC;MAClBC,UAAU,EAAE,CAAC;MACbC,eAAe,EAAE,EAAE;MACnBC,KAAK,EAAE,EAAE;MACTC,aAAa,EAAE,KAAK;MACpBC,UAAU,EAAE,EAAE;MACdC,UAAU,EAAE;IACd;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,UAAU,CAAC,CAAC;IACjB,IAAI,CAACC,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAACC,UAAU,CAAC,CAAC;EACnB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMH,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF,MAAMI,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;QAClD,MAAMC,QAAO,GAAI,MAAMnB,KAAK,CAACoB,GAAG,CAAC,uCAAuC,EAAE;UACxEC,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUN,KAAK;UAChC;QACF,CAAC,CAAC;QACF,IAAI,CAACb,WAAU,GAAIgB,QAAQ,CAACjB,IAAI,CAACqB,WAAW;QAC5C,IAAI,CAACnB,eAAc,GAAIe,QAAQ,CAACjB,IAAI,CAACsB,eAAe;QACpD,IAAI,CAACnB,UAAS,GAAIc,QAAQ,CAACjB,IAAI,CAACuB,iBAAiB;MACnD,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD;IACF,CAAC;IACD,MAAMb,oBAAoBA,CAAA,EAAG;MAC3B,IAAI;QACF,MAAMG,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;QAClD,MAAMC,QAAO,GAAI,MAAMnB,KAAK,CAACoB,GAAG,CAAC,8CAA8C,EAAE;UAC/EC,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUN,KAAK;UAChC;QACF,CAAC,CAAC;QACF,IAAI,CAACV,eAAc,GAAIa,QAAQ,CAACjB,IAAI;MACtC,EAAE,OAAOwB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACzD;IACF,CAAC;IACD,MAAME,cAAcA,CAACC,MAAM,EAAE;MAC3B,IAAI;QACF,MAAMb,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;QAClD,MAAMlB,KAAK,CAAC8B,IAAI,CAAC,6CAA6C,EAAE;UAAEC,OAAO,EAAEF;QAAO,CAAC,EAAE;UACnFR,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUN,KAAK;UAChC;QACF,CAAC,CAAC;QACF,IAAI,CAACH,oBAAoB,CAAC,CAAC;MAC7B,EAAE,OAAOa,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MACjD;IACF,CAAC;IACD,MAAMZ,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF,MAAME,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;QAClD,MAAMC,QAAO,GAAI,MAAMnB,KAAK,CAACoB,GAAG,CAAC,mCAAmC,EAAE;UACpEC,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUN,KAAK;UAChC;QACF,CAAC,CAAC;QACF,IAAI,CAACT,KAAI,GAAIY,QAAQ,CAACjB,IAAI;MAC5B,EAAE,OAAOwB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C;IACF,CAAC;IACDM,iBAAiBA,CAACH,MAAM,EAAE;MACxB,IAAI,CAACrB,aAAY,GAAI,IAAI;MACzB,IAAI,CAACE,UAAS,GAAImB,MAAM;IAC1B,CAAC;IACDI,cAAcA,CAAA,EAAG;MACf,IAAI,CAACzB,aAAY,GAAI,KAAK;MAC1B,IAAI,CAACC,UAAS,GAAI,EAAE;IACtB,CAAC;IACD,MAAMyB,QAAQA,CAAA,EAAG;MACf,IAAI;QACF,MAAMlB,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;QAClD,MAAMlB,KAAK,CAAC8B,IAAI,CAAC,uCAAuC,EAAE;UACxDC,OAAO,EAAE,IAAI,CAACrB,UAAU;UACxByB,MAAM,EAAE,IAAI,CAAC1B;QACf,CAAC,EAAE;UACDY,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUN,KAAK;UAChC;QACF,CAAC,CAAC;QACF,IAAI,CAACiB,cAAc,CAAC,CAAC;QACrB,IAAI,CAACnB,UAAU,CAAC,CAAC;MACnB,EAAE,OAAOY,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC7C;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}